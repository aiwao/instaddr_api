[![Go Reference](https://pkg.go.dev/badge/github.com/aiwao/instaddr_api.svg)](https://pkg.go.dev/github.com/aiwao/instaddr_api)
# instaddr_api
api wrapper of "m.kuku.lu"
## Options
### Client
```go
//Set http client
instaddr.Options{
    Client: &http.Client{}
}
//If you don't set the client, the client will be http.DefaultClient
instaddr.Options{}//http.DefaultClient
```
### User-agent
```go
//Set user-agent
instaddr.Options{
    UserAgent: "Mozilla..."
}

//If you don't set the user-agent, the user-agent will be random
instaddr.Options{} //Mozilla...

//If you set "RandomUserAgent" to true, the user-agent will be random
instaddr.Options{
    RandomUserAgent: true
}//Mozilla...

//Random user-agents are generated by spoof.go:randUA()
```
## Create account
```go
acc, err := instaddr.NewAccount(instaddr.Options{})
if err != nil ...
```
## Login to account
```go
acc, err := instaddr.LoginAccount(instaddr.Options{}, instaddr.AuthInfo{"AccountID", "Password"})
if err != nil ...
```
## Create mail address
### With expiration
```go
acc, err := ...
addr, err := acc.CreateAddressWithExpiration(instaddr.Options{})
```
### With domain and name
```go
acc, err := ...
addr, err := acc.CreateAddressWithDomainAndName(instaddr.OptionsName{Name: "Name"}, "mail4.uk")
//If you don't set the "Name", the "Name" will be random
```
#### Get available mail domains
```go
acc, err := ...
domains, err := acc.GetMailDomains(instaddr.Options{})
```
### By random
```go
acc, err := ...
addr, err := acc.CreateAddressRandom(instaddr.Options{})
```
## Search mail
```go
acc, err := ...
addr, err := ...
previews, err := acc.SearchMail(instaddr.Options{}, addr.Address)
```
## View mail content
```go
acc, err := ...
addr, err := ...
previews, err := ...
mail, err := account.ViewMail(instaddr.Options{}, previews[0])
```
## Download mail attachment
```go
acc, err := ...
addr, err := ...
previews, err := ...
mail, err := ...
attachmentBytes, err := acc.DownloadAttachment(instaddr.Options{}, mail.Attachments[0])
```
## Send mail
```go
acc, err := ...
addr, err := ...
file, err := os.Open("hello.txt")
if err != nil ...
defer file.Close()
res, err := acc.SendMail(instaddr.OptionsSendMail{
    Files: []instaddr.UploadFileData{
        {Filename: "hello.txt", FileBody: file},
        {Filename: "hello2.txt", BufferBody: bytes.NewBuffer([]byte("Hello2"))},
    },
}, addr, "Subject", "Content", "mailto@example.com")
```
## Update mail list
```go
acc, err := ...
list, err := acc.UpdateMailAccountList(instaddr.Options{})
```
## Get account's id and password
```go
acc, err := ...
info, err := acc.GetAuthInfo(instaddr.Options{})
if err != nil ...
info.AccountID //01234567890
info.Password //Ex4MplE
```